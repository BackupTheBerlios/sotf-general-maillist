<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Sotf-general] r548 - in node/trunk/code: classes doc
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/sotf-general/2006-April/index.html" >
   <LINK REL="made" HREF="mailto:sotf-general%40lists.berlios.de?Subject=Re%3A%20%5BSotf-general%5D%20r548%20-%20in%20node/trunk/code%3A%20classes%20doc&In-Reply-To=%3C200604031621.k33GLVeQ006319%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000161.html">
   <LINK REL="Next"  HREF="000130.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Sotf-general] r548 - in node/trunk/code: classes doc</H1>
    <B>buddhafly at berlios.de</B> 
    <A HREF="mailto:sotf-general%40lists.berlios.de?Subject=Re%3A%20%5BSotf-general%5D%20r548%20-%20in%20node/trunk/code%3A%20classes%20doc&In-Reply-To=%3C200604031621.k33GLVeQ006319%40sheep.berlios.de%3E"
       TITLE="[Sotf-general] r548 - in node/trunk/code: classes doc">buddhafly at berlios.de
       </A><BR>
    <I>Mon Apr  3 18:21:31 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000161.html">AW: [Sotf-general] New Topic Tree when?
</A></li>
        <LI>Next message: <A HREF="000130.html">AW: [Sotf-general] Release Note: New Topic Tree
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#129">[ date ]</a>
              <a href="thread.html#129">[ thread ]</a>
              <a href="subject.html#129">[ subject ]</a>
              <a href="author.html#129">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: buddhafly
Date: 2006-04-03 18:21:28 +0200 (Mon, 03 Apr 2006)
New Revision: 548

Removed:
   node/trunk/code/doc/README.webdav.txt
Modified:
   node/trunk/code/classes/sotf_User.class.php
Log:
webdav support removed because of security concerns


Modified: node/trunk/code/classes/sotf_User.class.php
===================================================================
--- node/trunk/code/classes/sotf_User.class.php	2006-04-02 15:06:07 UTC (rev 547)
+++ node/trunk/code/classes/sotf_User.class.php	2006-04-03 16:21:28 UTC (rev 548)
@@ -227,39 +227,7 @@
 	  if(!is_dir($dir)) {
 		 if(!mkdir($dir, 0775))
 			raiseError(&quot;Could not create directory for user&quot;);
-
-         //-------------------- added by martin schmidt 05-09-19
-		 else {
-		  	
-			$htaccess=fopen($dir . &quot;/.htaccess&quot;, &quot;w&quot;);
-     			$htaccess_string = &quot;AuthName \&quot;Directory for User &quot;.$this-&gt;name.&quot;\&quot;&quot;;
-			$htaccess_string .= &quot;\nAuthType basic&quot;;
-			$htaccess_string .= &quot;\nAuth_PG_host &quot; . $config['nodeDbHost'];
-			$htaccess_string .= &quot;\nAuth_PG_user &quot; . $config['nodeDbUser'];
-			$htaccess_string .= &quot;\nAuth_PG_pwd &quot; . $config['nodeDbPasswd'];
-			$htaccess_string .= &quot;\nAuth_PG_port &quot; . $config['nodeDbPort'];
-			$htaccess_string .= &quot;\nAuth_PG_database &quot; . $config['nodeDbName'];
-			$htaccess_string .= &quot;\nAuth_PG_pwd_table sotf_users&quot;;
-			$htaccess_string .= &quot;\nAuth_PG_uid_field username&quot;;
-			$htaccess_string .= &quot;\nAuth_PG_pwd_field password&quot;;
-			$htaccess_string .= &quot;\nAuth_PG_encrypted off&quot;;
-			$htaccess_string .= &quot;\nRequire user &quot; . $this-&gt;name;
-			$htaccess_string .= &quot;\n\n&lt;Files .htaccess&gt;&quot;;
-			$htaccess_string .= &quot;\norder allow,deny&quot;;
-			$htaccess_string .= &quot;\ndeny from all&quot;;
-			$htaccess_string .= &quot;\n&lt;/Files&gt;&quot;;
-			fwrite($htaccess, $htaccess_string, &quot;400&quot;);
-			fclose($htaccess);
-
-			$warnfile=fopen($dir . &quot;/DO NOT DELETE .HTACCESS&quot;, &quot;w&quot;);
-			fwrite($warnfile, &quot;If you delete the .htaccess-file, your user directory could be read by other users if WebDav is enabled.&quot;, &quot;400&quot;);
-			fclose($warnfile);
-			
-               }
-
-	  //------------------------------------------------
-
-	  }
+         }
 	  return $dir;
 	}
 	

Deleted: node/trunk/code/doc/README.webdav.txt
===================================================================
--- node/trunk/code/doc/README.webdav.txt	2006-04-02 15:06:07 UTC (rev 547)
+++ node/trunk/code/doc/README.webdav.txt	2006-04-03 16:21:28 UTC (rev 548)
@@ -1,67 +0,0 @@
-StreamOnTheFly and WebDAV
-Instructions for node administators
-
-
-IMPORTANT SECURITY INFORMATION
-
-At the moment, the .htaccess files which control the user authentication are created by the
-time when a NEW user directory is created &#150; concretely when a user first accesses his
-&#147;Editor&#146;s Console&#148; on the node.
-Thus, existent user directories will preliminary be accessible via WebDAV without user
-verification!
-The WebDAV configuration as described here has successfully been tested on Windows
-using WebDrive (<A HREF="http://www.webdrive.com">http://www.webdrive.com</A>). Unfortunately, I have not got any experience
-with other system configurations.
-Therefore, I would classify the current status of the WebDAV link as UNSTABLE.
-As soon as everything is clarified, a script should be written to implement the WebDAV 
-authentication into existent user directories.
-
-
-INTRODUCTION
-
-WebDAV is a comfortable alternative for node users to upload content onto the node.
-It is directly integrated into Mac OS X systems and most LINUX distributions and &#150; with the
-help of an appropriate client &#150; can also be used under Windows.
-How to get WebDAV running on a SOTF node
-
-1. First, download the WebDAV Apache Module from <A HREF="http://www.webdav.org/mod_dav/">http://www.webdav.org/mod_dav/</A>
-and install it. Help can be found at <A HREF="http://www.webdav.org/mod_dav/install.html.">http://www.webdav.org/mod_dav/install.html.</A>
-On Debian, you can easily get the whole package using apt-get:
-apt-get install libapache-mod-dav
-
-2. Create an DAVLockDB file. This file is used for storing information on file locks and
-must be writable for the user under which Apache is running. If you are not sure, you
-can find the required user name in the web server configuration.
-
-3. Add the following lines into your Apache config file. Usually, it can be found under
-/etc/apache/httpd.conf.
-
-##################################################
-DAVLockDB /path/to/the/DAVLockDB/file
-Alias /webdav /path/to/the/node&#146;s/users/directory
-&lt;Location /webdav&gt;
-DAV on
-Order allow,deny
-Allow from all
-AllowOverride All
-&lt;/Location&gt;
-&lt;Directory / path/to/the/node&#146;s/users/directory &gt;
-Order allow,deny
-Allow from all
-AllowOverride All
-&lt;/Directory&gt;
-##################################################
-
-After having done the changes, don&#146;t forget to restart the web server.
-
-4. That&#146;s all. The user directories are now accessible via WebDAV under the following
-address: www.node-server.url/webdav/username
-
-The user will be asked to enter his SOTF node password after the connection has
-been established.
-
-
-Written on 05-09-28 by
------------------------------------------------
-Martin Schmidt | <A HREF="https://lists.berlios.de/mailman/listinfo/sotf-general">ptmschmidt at fh-stpoelten.ac.at</A>
------------------------------------------------
\ No newline at end of file


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000161.html">AW: [Sotf-general] New Topic Tree when?
</A></li>
	<LI>Next message: <A HREF="000130.html">AW: [Sotf-general] Release Note: New Topic Tree
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#129">[ date ]</a>
              <a href="thread.html#129">[ thread ]</a>
              <a href="subject.html#129">[ subject ]</a>
              <a href="author.html#129">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/sotf-general">More information about the Sotf-general
mailing list</a><br>
</body></html>
